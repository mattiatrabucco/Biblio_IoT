{% extends "base.html" %}
{% load static %}

{% block head %}
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://unpkg.com/minze@1.0.3" ></script>
<script src="{% static 'js/main.js' %}"></script>
<link rel="shortcut icon" href="">
<link rel="stylesheet" href="{% static 'css/fonts.css' %}">
<link rel="stylesheet" href="{% static 'css/style.css' %}">
{% endblock %}

{% block body %}
<bib-app>
    <bib-sidebar active="home"></bib-sidebar>

    <bib-main>
        <bib-header active="home">
            <div slot="headline">Biblio IoT</div>
            <div slot="sub-headline">Account</div>

            <nav slot="nav">
            <!--<a href="https://unimore.it" target="_blank">Unimore</a>
            <a href="https://github.com/mattiatrabucco/BiblioIoT" target="_blank">GitHub</a>-->
            <a href="{% url 'myapp:logout_view' %}">Logout</a>
            </nav>
        </bib-header>

        <bib-content>
            <bib-welcome name="{{ utente.nome }} {{ utente.cognome }}" biblio="{{ where_to_go | upper }}" rewards_level="{{ rewards_level }}"></bib-welcome>


            <bib-button class="button">
                <form action="" method="post">
                  {% csrf_token %} 
                  <button name="reward" value="reward">Riscatta il reward</button>
                </form>
            </bib-button>
            
            <br><br>
            {% if reward == "ALREADY" %}
            <p>Reward già riscattato.</p>
            {% elif reward == "NO" %}
            <p>Non sei ancora entrato nella biblioteca suggerita.</p>
            {% elif reward == "DONE" %}
            <p>Riscattato ora il tuo reward di oggi!</p>
            {% endif %}
            
            <br>
            <bib-accordion>
                <div slot="title">
                    Informazioni reward
                </div>
                <div slot="content">
                    Il tuo livello attuale è <b>{{ utente.rewards_counter }}</b>
                    <br><br>
                    Ottieni un reward per ogni ingresso in una biblioteca consigliata 
                    e conquisti nuove medaglie continuando a seguire i nostri consigli.  

                </div>
            </bib-accordion>
            <br>
            <bib-accordion>
                <div slot="title">
                    Impostazioni Telegram Bot
                </div>
                <div slot="content">
                    <form action="" method="post">
                        {% csrf_token %}
                        Inserisci qui il tuo username Telegram (senza @):
                        <input type="text" id="telegram" name="telegram" required>
                        <br><br>
                        <bib-button class="button">
                            <input type="submit" value="Salva">
                        </bib-button>
                    </form>
                </div>
            </bib-accordion>
            
        </bib-content>


    </bib-main>
</bib-app>
{% endblock %}