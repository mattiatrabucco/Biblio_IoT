{% extends "base.html" %}
{% load static %}

{% block head %}
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://unpkg.com/minze@1.0.3" ></script>
<script src="{% static 'js/main.js' %}"></script>
<link rel="shortcut icon" href="">
<link rel="stylesheet" href="{% static 'css/fonts.css' %}">
<link rel="stylesheet" href="{% static 'css/style.css' %}">
{% endblock %}


{% block body %}
<bib-app>
    <bib-sidebar></bib-sidebar>

    <bib-main>
      <bib-header>
        <div slot="headline">Biblio IoT</div>
        <div slot="sub-headline">Dashboard</div>

        <nav slot="nav">
          <a href="https://unimore.it" target="_blank">Unimore</a>
          <a href="https://github.com/mattiatrabucco/BiblioIoT" target="_blank">GitHub</a>
        </nav>
      </bib-header>

      <bib-content>
        {% if biblioteche %}
        <bib-wrap >
            {% for biblio_name, biblio_data in biblioteche.items %}
                <bib-wrap >
                    {% if biblio_data.closed %}
                        <info-card
                            top-line="--"
                            headline="CHIUSA"
                            value="{{ biblio_name | upper}}"
                            background="linear-gradient(220.64deg, #E7E7E7 0%, #858585 100%)"
                        ></info-card>
                    {% else %}
                        {% if biblio_data.percentage < 25 %}
                            <info-card
                                top-line="{{ biblio_data.percentage }}%"
                                headline="QUASI VUOTA"
                                value="{{ biblio_name | upper}}"
                                background="linear-gradient(220.64deg, #bef4de 0%, #59e3ac 100%)"
                            ></info-card>
                        {% endif %}
                        {% if biblio_data.percentage >= 25 and biblio_data.percentage < 50 %}
                            <info-card
                                top-line="{{ biblio_data.percentage }}%"
                                headline="POCO AFFOLLATA"
                                value="{{ biblio_name | upper}}"
                                background="linear-gradient(220.64deg, #e6e6ff 0%, #9999ff 100%)"
                            ></info-card>
                        {% endif %}
                        {% if biblio_data.percentage >= 50 and biblio_data.percentage < 75 %}
                            <info-card
                                top-line="{{ biblio_data.percentage }}%"
                                headline="MOLTO AFFOLLATA"
                                value="{{ biblio_name | upper}}"
                                background="linear-gradient(220.64deg, #ffe9e5 0%, #ffb9aa 100%)"
                            ></info-card>
                        {% endif %}
                        {% if biblio_data.percentage >= 75 %}
                            <info-card
                                top-line="{{ biblio_data.percentage }}%"
                                headline="PIENA"
                                value="{{ biblio_name | upper}}"
                                background="linear-gradient(220.64deg, #ffcace 0%, #ff5462 100%)"
                            ></info-card>
                        {% endif %}
                    {% endif %}
                
    
                {% if biblio_data.closed %}
                    <extra-card
                        first-line="Orario di oggi: {{ biblio_data.opening_hours }}"
                        background="linear-gradient(220.64deg, #E7E7E7 0%, #858585 100%)"
                    ></extra-card>
                {% else %}
                    {% if biblio_data.extension != "N/A" %}
                       <extra-card
                            first-line="Estesa in {{ biblio_data.extension.name }} ({{ biblio_data.extension.capacity }} posti) dalle {{ biblio_data.extension.open_from }} alle {{ biblio_data.extension.open_until }}"
                            background="linear-gradient(220.64deg, #bef4de 0%, #59e3ac 100%)"
                        ></extra-card>
                    {% endif %}
                    <extra-card
                        first-line="Posti totali: {{ biblio_data.capacity }}"
                        second-line="Orario di oggi: {{ biblio_data.opening_hours }}"
                        background="linear-gradient(220.64deg, #E7E7E7 0%, #858585 100%)"
                    ></extra-card>
                {% endif %}
                </bib-wrap>
            {% endfor %}
        </bib-wrap>
        {% endif %}
      </bib-content>


    </bib-main>
</bib-app>

<p>
    Sei gi√† registrato? <a href="{% url 'myapp:home' %}">Accedi qui</a> | Altrimenti,
    <a href="{% url 'myapp:register' %}">registrati ora</a>
</p>
{% endblock %}